var $jscomp={scope:{},findInternal:function(a,h,d){a instanceof String&&(a=String(a));for(var g=a.length,k=0;k<g;k++){var m=a[k];if(h.call(d,m,k,a))return{i:k,v:m}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,h,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[h]=d.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,h,d,g){if(h){d=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var k=a[g];k in d||(d[k]={});d=d[k]}a=a[a.length-1];g=d[a];h=h(g);h!=g&&null!=h&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6-impl","es3");
var Viz=function(a,h){function d(){var e=0;d3.selectAll(".node").each(function(){for(var c=d3.select(this),b=c.data()[0],a=!1,d=0;d<l.length;d++){var t=l[d].visible&&b.servicesStatuses[d],a=a||t;c.select(".service_"+d).attr("fill",t?l[d].color:"#1D3542")}a&&e++});$("#alive").find(".value").text(e)}function g(){var e=$("#svg-viz"),c=e.height(),e=e.width(),b=k(f),a=Math.max(f[0].width,f[0].height);b.dx+=2*a;b.dy+=5*a;b.x+=.5*a;b.y+=.5*a;a=Math.min(e/b.dx,c/b.dy);u.translate([e/2-a*b.x,c/2-a*b.y]).scale(a).event(p)}
function k(a){var c,b,e=c=Number.MAX_VALUE,d=b=Number.MIN_VALUE;a.forEach(function(a){void 0!=a&&(e=Math.min(a.x,e),d=Math.max(a.x,d),c=Math.min(a.y,c),b=Math.max(a.y,b))});return{x:(d+e)/2,y:(b+c)/2,dx:d-e,dy:b-c}}function m(a){for(var c=[],b=0;b<a;b++)c.push({x:45*v[b][0],y:26*v[b][1]});return c}function w(a){var c="<table><td><img src='https://ructfe.org/logos/"+md5(a.name)+".png'/></td><td><div class='header-wrapper'><span class='header'></span> <span class='value team-name'>",b;b=a.name;b=$("<div/>").text(b).html();
return c+b+"</span></div><div><span class='header'>Place:</span> <span class='value'>"+a.place+"</span></div><div><span class='header'>Score:</span> <span class='value'>"+a.score+"</span></div></td></tr></table>"}var A={atlablog:4,weather:1,cartographer:3,sapmarine:2,crash:0,thebin:5},B="#ED953A #E5BD1F #3FE1D6 #568AFF #8C41DA #BA329E".split(" "),C={atlablog:3,weather:4,cartographer:5,sapmarine:0,crash:1,thebin:2},f=[],l=Array(6),x={},y=[],r,q=void 0,D=[],v=[[19,20],[19,18],[18,19],[18,21],[19,22],
[20,21],[21,20],[22,21],[21,22],[20,23],[21,24],[22,25],[21,26],[20,25],[6,11],[6,13],[7,12],[8,13],[9,12],[8,11],[8,9],[7,10],[7,14],[8,15],[7,16],[8,17],[9,16],[9,14],[10,15],[10,17],[9,18],[7,18],[8,19],[9,20],[10,19],[11,18],[12,17],[12,15],[11,16],[11,14],[8,23],[8,25],[8,21],[9,22],[22,19],[23,20],[22,17],[21,16],[23,18],[24,19],[25,18],[24,17],[25,16],[24,15],[23,16],[23,14],[22,15],[21,14],[20,13],[21,12],[22,13],[25,20],[26,21],[27,22],[28,23],[29,24],[30,23],[29,22],[28,21],[27,20],[26,
19],[27,18],[26,17],[26,15],[27,16],[13,24],[13,26],[13,28],[14,27],[15,28],[15,26],[14,25],[12,27],[11,28],[13,32],[13,30],[14,33],[14,31],[14,29],[15,30],[16,31],[17,30],[18,31],[18,33],[17,32],[16,33],[17,34],[15,32],[12,33],[13,34],[12,31],[11,32],[10,33],[28,17],[29,16],[30,17],[29,18],[28,19],[29,20],[24,21],[6,9],[5,10],[5,12],[5,14],[4,13],[3,14],[3,12],[9,8],[9,6],[8,7],[12,9],[13,8],[14,7],[13,6],[17,10],[16,11],[15,12],[16,13],[17,12],[16,15],[21,10],[22,11],[23,12],[23,10],[23,8],[24,
9],[24,11],[24,13],[25,12],[25,14],[6,19],[5,20],[4,21],[4,19],[3,18],[3,20],[4,23],[5,22],[6,21],[7,20],[7,22],[14,23],[15,24],[16,25],[27,10],[27,8],[27,6],[28,7],[29,6],[29,4],[31,8],[30,9],[29,10],[28,9],[29,8],[30,7],[30,11],[31,10],[31,12],[32,11],[6,27],[5,28],[4,27],[4,29],[3,28],[3,30],[3,32],[4,31],[5,30],[6,29],[7,30],[7,32],[6,31],[7,34],[6,33],[5,32],[22,31],[23,30],[24,29],[25,28],[23,32],[22,33],[22,35],[23,34],[24,33],[25,32],[25,30],[24,31],[26,29],[27,30],[26,31],[27,28],[26,33],
[27,34],[28,35],[29,34],[29,32],[29,30],[5,8],[4,7],[5,6],[6,7],[3,6],[4,5],[18,9],[12,5],[13,4],[31,26],[32,25],[33,24],[33,22],[33,20],[33,18],[32,19],[34,21],[35,22],[34,23],[34,25],[35,24],[35,26],[34,27],[34,29],[33,26],[33,28],[36,29],[35,28],[36,27],[36,25],[34,33],[33,34],[32,35],[32,33],[33,8],[34,7],[35,8],[34,9],[35,10],[36,11],[37,12],[36,13],[36,15],[37,16],[37,18],[36,17],[37,20],[36,9],[37,10],[34,15],[34,13],[35,12],[35,14],[38,15],[3,4],[2,5],[2,13],[1,14],[0,15],[1,16],[2,15],[2,
31],[1,32],[3,34],[4,37],[3,36],[2,37],[2,35],[5,38],[4,39],[10,35],[11,34],[11,36],[10,37],[11,38],[12,39],[12,37],[12,35],[13,36],[14,35],[26,39],[27,38],[28,39],[29,38],[29,40],[28,41],[27,40],[26,41],[28,37],[29,36],[27,36],[26,35],[35,36],[34,35],[34,37],[35,38],[34,39],[35,34],[33,36],[10,21],[11,20],[25,22],[2,7],[1,6],[17,20],[2,27],[36,35],[37,34],[37,26],[19,30],[18,29],[30,5],[36,7],[37,8],[36,39],[32,39],[31,38],[31,36],[32,37],[33,38],[8,41],[8,39],[7,40],[6,39],[5,40],[4,41],[13,18],
[13,16],[0,31],[0,33],[1,26],[2,3],[38,27],[37,40],[37,38],[33,40],[32,41],[38,25],[39,26],[39,14],[39,12],[38,13],[37,14],[36,5],[37,6],[38,5],[33,6],[21,8],[8,5],[5,4],[9,4],[12,29],[11,30],[9,32],[10,31],[10,29],[0,17],[1,18],[1,8],[8,3],[15,14],[30,3],[31,4],[18,7],[21,6],[22,7],[22,9],[23,6],[16,7],[17,6],[17,8],[11,4],[10,5],[10,3],[9,2],[10,7],[11,6],[1,38],[2,39],[26,5],[27,4],[27,2],[32,3],[36,3],[37,4],[34,3],[34,1],[38,35],[11,40],[11,26],[12,25],[2,19],[2,21],[1,20],[12,7],[28,5],[36,
37],[37,36],[38,41],[38,1],[4,3],[10,1],[8,1],[2,29],[1,28],[2,25],[1,40],[32,9],[33,10],[34,11],[33,4],[32,1],[33,2],[30,31],[1,4],[1,2],[0,1],[2,1],[39,28],[25,40],[-1,16],[-1,18],[39,34],[40,33],[41,34],[39,20],[40,21],[40,23],[41,20],[41,22],[40,35],[41,26],[41,18],[42,19],[3,38],[1,10],[0,9],[-1,8],[0,7],[-2,9],[-2,23],[-3,24],[-3,26],[-2,25],[-1,26],[-2,29],[-4,20]];(function(){for(var e in a.teams)if(a.teams.hasOwnProperty(e)){var c=f.length;f.push({index:c,id:c,team_id:e,name:a.teams[e],score:0,
place:null,status:0})}})();(function(){for(var e in a.services)if(a.services.hasOwnProperty(e)){var c=A[a.services[e]];l[c]={id:c,service_id:e,name:a.services[e],color:B[c],visible:!0};x[e]=c}})();(function(){for(var a=$("#filters-container"),c=0;c<l.length;c++){var b=l[c],n=$('<div class="filter"><span class="bullet">&#9679;&ensp;&thinsp;</span><span class="service-name">'+b.name+"</span></div>");n.css("color","#B7E99B");n.find(".bullet").css("color",b.color);n.click(function(a){return function(){$(this).hasClass("deselected")?
($(this).removeClass("deselected"),l[a].visible=!0):($(this).addClass("deselected"),l[a].visible=!1);d();for(var b=0,c=0;c<y.length;c++)l[x[y[c][2]]].visible&&b++;$("#attacks").find(".value").text(b)}}(c));a.append(n)}})();(function(){for(var a=0;a<f.length;a++)f[a].score=h.table[f[a].team_id];a=_.groupBy(f,"score");groupsArray=[];for(var c in a)a.hasOwnProperty(c)&&groupsArray.push({key:parseFloat(c),value:a[c]});groupsArray=_.sortBy(groupsArray,"key").reverse();c=1;for(i=0;i<groupsArray.length;i++){var a=
groupsArray[i].value,b=c+a.length-1;for(j=0;j<a.length;j++)a[j].place=c===b?c+"":c+"-"+b;c=b+1}void 0!=q&&(c=w(f[q]),$(".team-tooltip").empty().append(c))})();var p=d3.select("#svg-viz"),z=p.append("g").classed("container",!0);p.append("defs");var u=d3.behavior.zoom().scaleExtent([.25,3]).size([1366,662]).on("zoom",function(){z.attr("transform","translate("+d3.event.translate+") scale("+d3.event.scale+")")});p.call(u);(function(){var a=m(f.length);r=z.selectAll(".node").data(f).enter().append("g").attr("class",
"node");r.each(function(){var c=d3.select(this),b=c.data()[0];b.width=60;b.height=51.96;var d=a.shift();b.x=d.x;b.y=d.y;d=[{x:b.width/4,y:0},{x:3*b.width/4,y:0},{x:b.width,y:b.height/2},{x:3*b.width/4,y:b.height},{x:b.width/4,y:b.height},{x:0,y:b.height/2}];c.append("polygon").classed("island",!0).attr("points",d.map(function(a){return[a.x,a.y].join()}).join(" ")).attr("transform","translate("+b.x+", "+b.y+")").attr("fill-opacity",0);for(var e=b.width/2,h=b.height/2,f=0;6>f;f++){var g=C[l[f].name],
k=e+.55*(e-d[g].x),g=h+.55*(h-d[g].y);c.append("circle").classed("service",!0).classed("service_"+l[f].id,!0).attr("r",5).attr("cx",k).attr("cy",g).attr("fill","#1D3542").attr("transform","translate("+b.x+", "+b.y+")")}});g();$("#find-team-wrapper").find("input").on("keyup paste",function(){var a=$(this).val().toLowerCase();r.each(function(){var b=d3.select(this),c=b.data()[0],c=a.length?0===c.name.toLowerCase().indexOf(a):!1;b.select(".island").attr("fill-opacity",c?1:0)})})})();$(window).resize(function(){g()});
$("#svg-wrapper").tooltip({items:".node",track:!0,show:{effect:"fadeIn",delay:100,duration:80},hide:{effect:"fadeOut",delay:50,duration:40},content:function(){var a=d3.select(this).data()[0],c=w(a);q=a.id;return"<div class='team-tooltip'>"+c+"</div>"},close:function(){q=void 0}});$(".ui-helper-hidden-accessible").remove();return{getTeamsData:function(){return f},getInfo:function(){return a},getScoreboard:function(){return h},getPendingEvents:function(){return D},getScoreboardPageData:function(){}}};
